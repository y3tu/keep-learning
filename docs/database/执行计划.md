

### Explain输出

```sql
mysql> explain select * from one;
+----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+-------+
| id | select_type | table | partitions | type | possible_keys | key  | key_len | ref  | rows | filtered | Extra |
+----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+-------+
|  1 | SIMPLE      | one   | NULL       | ALL  | NULL          | NULL | NULL    | NULL |    1 |   100.00 | NULL  |
+----+-------------+-------+------------+------+---------------+------+---------+------+------+----------+-------+
```

|          字段 | 含义                   |
| ------------: | ---------------------- |
|            id | 语句的标识符           |
|   select_type | select类型             |
|         table | 输出该行的表名         |
|    partitions | 匹配的分区             |
|          type | 连接类型               |
| possible_keys | 可能的索引选择         |
|           key | 实际选择的索引         |
|       key_len | 所选键的长度           |
|           ref | 与索引比较的列         |
|          rows | 检查的预估行数         |
|      filtered | 按表条件过滤的行百分比 |
|         extra | 附加信息               |

#### id

select查询的序列号，包含一组数字，表示查询中执行select子句或者操作表的顺序。

`id`大致会出现 3种情况：

* `id`相同，执行顺序从上到下

看到三条记录的`id`都相同，可以理解成这三个表为一组，具有同样的优先级，执行顺序由上而下，具体顺序由优化器决定

```sql
mysql> EXPLAIN SELECT * FROM one o,two t, three r WHERE o.two_id = t.two_id AND t.three_id = r.three_id;
+----+-------------+-------+------------+--------+---------------+---------+---------+----------------------+------+----------+----------------------------------------------------+
| id | select_type | table | partitions | type   | possible_keys | key     | key_len | ref                  | rows | filtered | Extra                                              |
+----+-------------+-------+------------+--------+---------------+---------+---------+----------------------+------+----------+----------------------------------------------------+
|  1 | SIMPLE      | o     | NULL       | ALL    | NULL          | NULL    | NULL    | NULL                 |    2 |      100 | NULL                                               |
|  1 | SIMPLE      | t     | NULL       | ALL    | PRIMARY       | NULL    | NULL    | NULL                 |    2 |       50 | Using where; Using join buffer (Block Nested Loop) |
|  1 | SIMPLE      | r     | NULL       | eq_ref | PRIMARY       | PRIMARY | 4       | xin-slave.t.three_id |    1 |      100 | NULL                                               |
+----+-------------+-------+------------+--------+---------------+---------+---------+----------------------+------+----------+----------------------------------------------------+

```



* `id`不同，越大优先级越高，越先执行
* 两张情况同时存在，相同`id`划分为一组，同组的从上往下顺序执行，不同组 `id`值越大，优先级越高，越先执行。



